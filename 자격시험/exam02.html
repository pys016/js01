<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>투표하기</title>
    <style>
      body {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background-color: rgb(179, 252, 255);
      }

      h1 {
        margin-top: 50px;
        margin-bottom: 50px;
        text-align: center;
      }

      table,
      tr,
      th {
        padding: 10px 10px;
        border: 1px solid black;
        border-collapse: collapse;
      }

      td {
        padding-left: 5px;
        padding-right: 20px;
      }

      input {
        padding: 5px;
      }
    </style>
  </head>
  <body>
    <h1>ㆍ투표하기ㆍ</h1>
    <form name="frm" action="#" method="POST">
      <table>
        <tr>
          <th>주민번호</th>
          <td><input type="text" name="num" /></td>
          <td>예 : 8906153154726</td>
        </tr>
        <tr>
          <th>성명</th>
          <td><input type="text" name="name" /></td>
          <td></td>
        </tr>
        <tr>
          <th>투표번호</th>
          <td>
            <select name="vote">
              <option></option>
              <option>[1]김후보</option>
              <option>[2]이후보</option>
              <option>[3]박후보</option>
              <option>[4]조후보</option>
              <option>[5]최후보</option>
            </select>
          </td>
          <td></td>
        </tr>
        <tr>
          <th>투표시간</th>
          <td><input type="text" name="time" placeholder="예)0930" /></td>
          <td></td>
        </tr>
        <tr>
          <th>투표장소</th>
          <td><input type="text" name="place" placeholder="예)제1투표장" /></td>
          <td></td>
        </tr>
        <tr>
          <th>유권자확인</th>
          <td colspan="2" style="text-align: center">
            <input type="radio" name="voterCheck" />확인
            <input type="radio" name="voterCheck" />미확인
          </td>
        </tr>
        <tr>
          <th colspan="3" style="text-align: center">
            <button
              class="btn"
              type="submit"
              onclick="fn_submit(); return false"
            >
              투표하기
            </button>
            <button class="btn" type="reset" onclick="fn_reset()">
              다시하기
            </button>
          </th>
        </tr>
      </table>
    </form>

    <script>
      function fn_submit() {
        const num = document.frm.num.value;
        if (num == "") {
          alert("주민번호가 입력되지 않았습니다!");
          document.frm.num.focus();
          return false;
        }
        const t_num = /^[0-9]{13}/;
        //주민번호 유효성 검사
        if (!t_num.test(num)) {
          alert("유효하지않은 주민번호 입니다.\n숫자 13자리로 입력해주세요.");
          document.frm.num.focus();
          return false;
        }

        const name = document.frm.name.value;
        if (name == "") {
          //name.length == 0
          alert("성명이 입력되지 않았습니다!");
          document.frm.name.focus();
          return false;
        }
        const t_name = /^[가-힣]+$/; //한글이름 유효성 검사 ^[가-힣]{2,10}(앞에서 2자부터 10자까지)
        if (!t_name.test(name)) {
          alert("한글이름으로 입력해주세요.");
          document.frm.name.focus();
          return false;
        }

        if (document.frm.vote.value == "") {
          alert("후보번호가 선택되지 않았습니다!");
          document.frm.vote.focus();
          return false;
        }
        const time = document.frm.time.value;
        if (time == "") {
          alert("투표시간이 입력되지 않았습니다!");
          document.frm.time.focus();
          return false;
        }

        const t_time = /^[0-9]{4}/;
        if (!t_time.test(time)) {
          alert("투표시간을 숫자4자 로 입력해주세요! 예)0930");
          document.frm.time.focus();
          return false;
        }

        if (document.frm.place.value == "") {
          alert("투표장소가 입력되지 않았습니다!");
          document.frm.place.focus();
          return false;
        }
        if (
          document.frm.place.value != "제1투표장" &&
          document.frm.place.value != "제2투표장"
        ) {
          alert("투표장소를 제1투표장 or 제2투표장 으로 입력해주세요 ㅡㅡ");
          document.frm.place.focus();
          return false;
        }

        if (document.frm.voterCheck.value == "") {
          alert("유권자확인이 선택되지 않았습니다!");
          return false;
        }
        alert("투표가 완료되었습니다.");
        f.submit();
      }
      function fn_reset() {
        alert("정보를 지우고 처음부터 다시 입력합니다!");
        //return true; // 모든 검사가 통과하면 폼이 제출됩니다.
      }
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <h1>로컬스토리지 활용</h1>
    이름: <input type="text" class="indata in1" /><br />
    나이: <input type="text" class="indata in2" /><br />
    주소: <input type="text" class="indata in3" /><br />
    <button id="data-save">저장하기</button>
    <hr />
    <button id="data-load">불러오기</button
    ><button id="data-del">삭제하기</button>
    <h3></h3>
    <script>
      const in1 = document.querySelector(".in1"); // 입력1
      const in2 = document.querySelector(".in2"); // 입력2
      const in3 = document.querySelector(".in3"); // 입력3
      const btnSave = document.querySelector("#data-save"); // 저장하기 실행
      const btnLoad = document.querySelector("#data-load"); // 불러오기 실행
      const btnDel = document.querySelector("#data-del"); // 삭제 실행
      const h3 = document.querySelector("h3"); // 결과
      let upId = 1;
      const upData = JSON.parse(localStorage.getItem("myData")) ?? [];
      btnSave.addEventListener("click", () => {
        const ori = {
          id: upId++,
          name: in1.value,
          age: in2.value,
          address: in3.value,
        };
        upData.push(ori);
        localStorage.setItem("myData", JSON.stringify(upData));
      });
      btnLoad.addEventListener("click", () => {
        const data = localStorage.getItem("myData");
        h3.innerHTML = data ?? "저장소에 데이터가 없습니다.";
      });
      btnDel.addEventListener("click", () => {
        localStorage.removeItem("myData");
      });
    </script>
  </body>
</html>
